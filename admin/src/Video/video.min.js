function video_init(e){function t(e,t){switch(e){case"online":null===ke&&(ke=a(t),Fe.publish("conectar",o()));break;case"conectar":null===ge&&(ge=n(t)),i(t);break;case"desconectar":d(t);break;case"changeStatus":r(t);break;case"readMessage":D(t);break;case"message":F(t);break;case"chanelComunicVideo":f(t);break;case"sendIceCandidate":S(t);break;case"onError":u(t)}}function o(){var e={conectar:{userId:Oe.userId,status:"online"}};return JSON.stringify(e)}function n(e){var t=JSON.parse(e);return parseInt(t.sessionId)}function s(){return parseInt(ge)}function a(e){try{$.ajax({url:Oe.url,data:{userId:Oe.userId,process:"selectUsers"},method:"POST",dataType:"JSON",success:function(t){null!==t&&(l(t),c(e))},error:function(e){console.log(e)}})}catch(t){console.log(t)}}function l(e){try{ke=new Array;for(var t=0;t<e.length;t++){var o=new Object;o.sessionId=null,o.userId=e[t].userId,o.nome=e[t].nome,o.nick=e[t].nick,o.status="offline",o.button=null,o.i=null,o.badge=j(e[t].msgNotRead),o.alertMsg=null,o.chat={visible:!1,window:{_construct:!1,panel:null,header:null,title:null,body:null,footer:null,form:null,textarea:null,buttonSend:null,iconClose:null},message:[{from:null,text:null,read:null,data:null}]},o.modal={visible:!1,close:null,window:null,iconCall:null,iconCloseCall:null,content:null,somChamada:null},ke[parseInt(e[t].userId)]=o}}catch(n){console.log(n)}}function c(e){try{var t=JSON.parse(e),o=$(t).toArray();ke.forEach(function(e){o.forEach(function(t){for(var o=0;o<t.length;o++)parseInt(e.userId)===parseInt(t[o].userId)&&(e.status=t[o].status,e.sessionId=t[o].sessionId)}),e.button=A(e),e.i=H(e.status)}),se()}catch(n){console.log(n)}}function i(e){try{var t=JSON.parse(e),o=parseInt(t.userId);if(parseInt(ge)!==parseInt(t.sessionId))if("offline"===t.status)d(e);else for(var n=0;n<Oe.optionsStatus.length;n++)if(Oe.optionsStatus[n].text===t.status){ke[o].sessionId=t.sessionId,ke[o].button.value=t.sessionId,ke[o].status=t.status,ke[o].i["class"]=Oe.optionsStatus[n].icon,ke[o].i.className=Oe.optionsStatus[n].icon,ke[o].i.classList=Oe.optionsStatus[n].icon,ke[o].i.style.color=Oe.optionsStatus[n].color,ke[o].i.title=Oe.optionsStatus[n].text;break}}catch(s){console.log(s)}}function r(e){try{var t=JSON.parse(e),o=parseInt(t.userId);if(parseInt(ge)!==parseInt(t.sessionId)&&parseInt(ke[o].sessionId)===parseInt(t.sessionId)){ke[o].status=t.status;for(var n=0;n<Oe.optionsStatus.length;n++)if(Oe.optionsStatus[n].text===t.status){ke[o].i["class"]=Oe.optionsStatus[n].icon,ke[o].i.className=Oe.optionsStatus[n].icon,ke[o].i.classList=Oe.optionsStatus[n].icon,ke[o].i.style.color=Oe.optionsStatus[n].color,ke[o].i.title=Oe.optionsStatus[n].text;break}}}catch(s){console.log(s)}}function d(e){try{var t=JSON.parse(e),o=parseInt(t.desconectar.userId);if(parseInt(Oe.userId)!==parseInt(t.desconectar.userId)&&parseInt(ke[o].sessionId)===parseInt(t.desconectar.sessionId))for(var n=0;n<Oe.optionsStatus.length;n++)if(Oe.optionsStatus[n].text===t.desconectar.status){ke[o].sessionId=null,ke[o].i["class"]=Oe.optionsStatus[n].icon,ke[o].i.className=Oe.optionsStatus[n].icon,ke[o].i.classList=Oe.optionsStatus[n].icon,ke[o].i.style.color=Oe.optionsStatus[n].color,ke[o].i.title=Oe.optionsStatus[n].text;break}}catch(s){console.log(s)}}function u(e){try{var t=JSON.parse(e),o=parseInt(t.onError.userId);if(s()===parseInt(t.onError.oldSessionId)){Fe.close(),ke=null;var n="Usuário duplicado, sua conexão foi fechada !! Provavelmente este login está sendo usado em outro dispositivo.";be(n)}else if(parseInt(Oe.userId)!==parseInt(t.onError.userId)&&parseInt(ke[o].sessionId)===parseInt(t.onError.oldSessionId)){ke[o].sessionId=t.onError.sessionId,ke[o].button.value=t.onError.sessionId;for(var a=0;a<Oe.optionsStatus.length;a++)t.onError.status===Oe.optionsStatus[a].text&&(ke[o].i["class"]=Oe.optionsStatus[a].icon,ke[o].i.className=Oe.optionsStatus[a].icon,ke[o].i.classList=Oe.optionsStatus[a].icon,ke[o].i.style.color=Oe.optionsStatus[a].color,ke[o].i.title=Oe.optionsStatus[a].text)}}catch(n){console.log(n)}}function m(e){try{var t=parseInt(e.userId);ke[t].chat.window._construct===!1?(ke[t].chat.window.panel=P(e),ke[t].chat.window.body=K(),ke[t].chat.window.header=Y(),ke[t].chat.window.footer=X(),ke[t].chat.window.title=W(e),ke[t].chat.window.form=G(e),ke[t].chat.window.iconClose=Z(e),ke[t].chat.window.buttonSend=ee(),ke[t].chat.window.textarea=Q(e),$(ke[t].chat.window.header).append(ke[t].chat.window.iconClose),$(ke[t].chat.window.header).append(ke[t].chat.window.title),$(ke[t].chat.window.panel).append(ke[t].chat.window.header),$(ke[t].chat.window.panel).append(ke[t].chat.window.body),$(ke[t].chat.window.form).append(ke[t].chat.window.textarea),$(ke[t].chat.window.form).append(ke[t].chat.window.buttonSend),$(ke[t].chat.window.footer).append(ke[t].chat.window.form),$(ke[t].chat.window.panel).append(ke[t].chat.window.footer),$(ke[t].modal.content).append(ke[t].chat.window.panel),$(ke[t].chat.window.panel).fadeIn(),ke[t].chat.window._construct=!0,B(t)):$(ke[t].chat.window.panel).is(":visible")||$(ke[t].chat.window.panel).fadeIn(),ke[t].chat.visible=!0,ke[t].badge.text=null,ke[t].badge.innerText=null,_(t),$(ke[t].chat.window.textarea).focus(),V(e)}catch(o){console.log(o)}}function p(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}function f(e){try{var t=JSON.parse(e);"chamando"===t.message?b(t):"desligou"===t.message?I(t):"estabelecerChamada"===t.message&&g(t)}catch(o){console.log(o)}}function h(e){try{null!==ke[e.userId].sessionId&&"offline"!==ke[e.userId].status?y(ke[e.userId]):be("Você esta tentado estabelecer vídeo conferência com um usuário  que está off-line")}catch(t){console.log(t)}}function w(e){try{C(e)}catch(t){console.log(t)}}function y(e){try{ke[e.userId].modal.window=ce(e),ke[e.userId].modal.content=ue(e,"chamando"),ke[e.userId].modal.iconCall=fe(),$(ke[e.userId].modal.content).append(ke[e.userId].modal.iconCall),$(ke[e.userId].modal.content).append(ie()),ke[e.userId].modal.close=de(ke[e.userId]),$(ke[e.userId].modal.window).append(ke[e.userId].modal.close),$(ke[e.userId].modal.window).append(ke[e.userId].modal.content),$("body").append(ke[e.userId].modal.window).fadeIn(),Ie=!0,ke[e.userId].modal.visible=!0,Ee=setTimeout(x,Oe.timeToResponse,e),E(e,!0)}catch(t){console.log(t)}}function b(e){try{Ie!==!0&&(ke[e.from].modal.window=ce(),ke[e.from].modal.content=ue(ke[e.from],"recebendo"),$(ke[e.from].modal.content).prepend(he()),ke[e.from].modal.iconCall=me(e),ke[e.from].modal.iconCloseCall=pe(ke[e.from]),$(ke[e.from].modal.content).append(ke[e.from].modal.iconCall),$(ke[e.from].modal.content).append(ke[e.from].modal.iconCloseCall),$(ke[e.from].modal.content).append(ie()),ke[e.from].modal.close=de(ke[e.from]),$(ke[e.from].modal.window).append(ke[e.from].modal.close),$(ke[e.from].modal.window).append(ke[e.from].modal.content),$("body").append(ke[e.from].modal.window).fadeIn(),Ie=!0,ke[e.from].modal.visible=!0,Ee=setTimeout(x,Oe.timeToResponse-1e3,ke[e.from]))}catch(t){console.log(t)}}function v(e){try{k(e)}catch(t){console.log(t)}}function g(e){try{clearTimeout(Ee),Ee=null,$(ke[e.from].modal.content).css(Oe.contentCSSVideo),$(ke[e.to].modal.content).css(Oe.contentCSSVideo),s()===parseInt(e.sessionId_to)?(""!==e.sdp_answser&&xe.setRemoteDescription(new RTCSessionDescription(e.sdp_answser)),$(ke[e.from].modal.content).html(Se),$(ke[e.from].modal.content).append($e),$(ke[e.from].modal.content).append(we()),$(ke[e.from].modal.content).append(ye(ke[e.from]))):($(ke[e.to].modal.content).html(Se),$(ke[e.to].modal.content).append($e),$(ke[e.to].modal.content).append(we()),$(ke[e.to].modal.content).append(ye(ke[e.to])))}catch(t){console.log(t)}}function I(e){ke[e.from].modal.visible=!1,ke[e.from].chat.window._construct=!1,ke[e.from].chat.visible=!1,$(ke[e.from].modal.window).remove(),ke[e.from].modal.window=null,Ie=!1,clearTimeout(Ee),Ee=null;var t=null!==ke[e.from].nick&&""!==ke[e.from].nick?ke[e.from].nick+" - "+ke[e.from].nome:ke[e.from].nome;be("O(a) "+t+" desligou a chamada de vídeo conferência neste momento."),xe!==!1&&(xe.close(),xe=!1),Se.src="",$e.src=""}function C(e){try{ke[e.userId].modal.visible=!1,ke[e.userId].chat.window._construct=!1,ke[e.userId].chat.visible=!1,$(ke[e.userId].modal.window).remove(),ke[e.userId].modal.window=null,Ie=!1;var t=new Object;t.from=Oe.userId,t.to=e.userId,t.sessionId_from=s(),t.sessionId_to=e.sessionId,t.message="desligou",Fe.call("chanelComunicVideo",JSON.stringify(t)),clearTimeout(Ee),Ee=null,xe!==!1&&(xe.close(),xe=!1),Se.src="",$e.src=""}catch(o){console.log(o)}}function x(e){ke[e.userId].modal.visible=!1,ke[e.userId].chat.window._construct=!1,ke[e.userId].chat.visible=!1,$(ke[e.userId].modal.window).remove(),ke[e.userId].modal.window=null,Ie=!1,xe!==!1&&(xe.close(),xe=!1),Se.src="",$e.src="",be("O tempo para chamada de vídeo conferência foi excedido")}function S(e){var t=JSON.parse(e);xe!==!1&&xe.addIceCandidate(new RTCIceCandidate(t.candidate))}function E(e,t){xe||(xe=new RTCPeerConnection(null)),xe.onicecandidate=function(e){e.candidate&&Fe.call("sendIceCandidate",JSON.stringify({candidate:e.candidate,sessionId:s()}))},xe.onnegotiationneeded=function(){t?xe.createOffer(function(o){xe.setLocalDescription(o);var n=new Object;n.from=Oe.userId,n.to=e.userId,n.sessionId_from=s(),n.sessionId_to=e.sessionId,n.message=t===!0?"chamando":"recebendo",n.sdp=xe.localDescription,Fe.call("chanelComunicVideo",JSON.stringify(n))},O):""!==e.sdp&&xe.setRemoteDescription(new RTCSessionDescription(e.sdp),function(){"offer"===xe.remoteDescription.type&&xe.createAnswer(function(t){xe.setLocalDescription(t);var o=new Object;o.from=Oe.userId,o.to=e.from,o.sessionId_from=s(),o.sessionId_to=e.sessionId_from,o.message="estabelecerChamada",o.estabelishConection=!0,o.sdp_answser=xe.localDescription,o.sdp_offer=e.sdp,Fe.call("chanelComunicVideo",JSON.stringify(o),!1)},O)},O)},xe.onaddstream=function(e){$e.src=URL.createObjectURL(e.stream)},N(!0)}function k(e){E(e,!1)}function N(e){navigator.getUserMedia({audio:e,video:e},function(e){Se.src=URL.createObjectURL(e),xe.addStream(e),Ce=e},O)}function O(e){log(e.name+": "+e.message)}function F(e){try{var t=JSON.parse(e),o=parseInt(t.from),n=new Array(t);if(R(o,n),ke[o].chat.visible!==!0){var s=""!==$(ke[o].badge).text()?parseInt(ke[o].badge.innerText):0;s++,ke[o].badge.innerText=s.toString(),ke[o].alertMsg=re(),$(ke[o].modal.content).find("audio").remove(),$(ke[o].modal.content).append(ke[o].alertMsg)}else t.sessionId=t.sessionId_from,t.userId=t.from,V(t)}catch(a){console.log(a)}}function R(e,t){try{for(var o=0;o<t.length;o++){var n=parseInt(t[o].from)===parseInt(Oe.userId)?!0:!1,s=ke[e].chat.message.length;ke[e].chat.message[s]={from:parseInt(t[o].from),text:te(t[o],n),data:oe(t[o],n),read:t[o].read===!0&&parseInt(t[o].from)===parseInt(Oe.userId)?ne():null},$(ke[e].chat.window.body).append(ke[e].chat.message[s].text),$(ke[e].chat.message[s].data).append(ke[e].chat.message[s].read),$(ke[e].chat.window.body).append(ke[e].chat.message[s].data)}_(e)}catch(a){console.log(a)}}function L(e){try{for(var t=0;t<e.length;t++)$.ajax({url:Oe.url,data:{to:e[t].to,from:e[t].from,message:e[t].message,process:"saveMessage"},method:"POST",dataType:"JSON",success:function(e){e.ok===!0},error:function(e){console.log(e)}})}catch(o){console.log(o)}}function T(e,t){try{$.ajax({url:Oe.url,data:{to:t,from:e,process:"setReadMessage"},method:"POST",dataType:"JSON",success:function(e){e.ok===!0},error:function(e){console.log(e)}})}catch(o){console.log(o)}}function _(e){try{var t=ke[e].chat.window.body;$(t).scrollTop($(t)[0].scrollHeight)}catch(o){console.log(o)}}function z(e){try{var t=parseInt(e.userId),o=$(ke[t].chat.window.textarea).val();if($(ke[t].chat.window.textarea).val(""),"\n"!==o[0]&&"\r"!==o[0]){var n=new Object;n.read=!1,n.message=J(o),n.from=Oe.userId,n.to=t,n.data=(new moment).format("DD-MM-YYYY HH:mm"),n.sessionId_from=s(),n.sessionId_to=ke[t].sessionId,Fe.call("message",JSON.stringify(n));var a=new Array(n);L(a),R(t,a)}return!1}catch(o){return console.log(o),!1}}function J(e){return e=e.replace("\n",""),e=e.replace("\r","")}function M(e){try{var t=parseInt(e.userId);$(ke[t].chat.window.panel).is(":visible")&&($(ke[t].chat.window.panel).fadeOut(),ke[t].chat.visible=!1)}catch(o){console.log(o)}}function B(e){try{$.ajax({url:Oe.url,data:{userId:Oe.userId,from:e,qtdMessages:Oe.qtdMessages,process:"getMessages"},method:"POST",dataType:"JSON",success:function(t){t.length&&R(e,t)},error:function(e){console.log(e)}})}catch(t){console.log(t)}}function V(e){if(T(e.userId,Oe.userId),null!==e.sessionId){var t=new Object;t.sessionId_to=parseInt(e.sessionId),t.sessionId_from=s(),t.to=parseInt(Oe.userId),t.from=parseInt(e.userId),t.read=!0,Fe.call("readMessage",JSON.stringify(t))}}function D(e){try{for(var t=JSON.parse(e),o=parseInt(t.to),n=0;n<ke[o].chat.message.length;n++)parseInt(ke[o].chat.message[n].from)===parseInt(Oe.userId)&&(null===ke[o].chat.message[n].read&&(ke[o].chat.message[n].read=ne()),$(ke[o].chat.message[n].data).append(ke[o].chat.message[n].read).fadeIn())}catch(s){console.log(s)}}function q(e){try{var t={status:{sessionId:s(),userId:Oe.userId,status:$(e).val()}};Fe.publish("changeStatus",JSON.stringify(t))}catch(o){console.log(o)}}function A(e){var t=document.createElement("button");return t.style.display="inline-block",t.innerText=""!==e.nick&&null!==e.nick?e.nick+" - "+e.nome:e.nome,t.text=""!==e.nick&&null!==e.nick?e.nick+" - "+e.nome:e.nome,t["class"]=Oe.buttonClassInitCall,t.className=Oe.buttonClassInitCall,t.classList=Oe.buttonClassInitCall,t.value=e.sessionId,t.id=e.userId,t.type="button",t.onclick=function(){h(e)},t}function j(e){var t=document.createElement("span");return t.innerText=parseInt(e)>0?e:null,t["class"]=Oe.classBadge,t.className=Oe.classBadge,t.classList=Oe.classBadge,t.style.backgroundColor=Oe.colorBadge,t}function U(){var e=document.createElement("select");e.name="selectStatus",e["class"]=Oe.selectClassStatus,e.className=Oe.selectClassStatus,e.classList=Oe.selectClassStatus,e.onchange=function(){q($(this))};for(var t=0;t<Oe.optionsStatus.length;t++){var o=document.createElement("option");o.value=Oe.optionsStatus[t].text,o.text=Oe.optionsStatus[t].text+" ",o.label=Oe.optionsStatus[t].text+" ",o.selected="online"===Oe.optionsStatus[t].text?!0:!1,$(o).append(H(Oe.optionsStatus[t].text)),$(e).append(o)}return e}function H(e){var t=document.createElement("i");t.nodeName="I",t.name="i";for(var o=0;o<Oe.optionsStatus.length;o++)if(e===Oe.optionsStatus[o].text){t["class"]=Oe.optionsStatus[o].icon,t.className=Oe.optionsStatus[o].icon,t.classList=Oe.optionsStatus[o].icon,t.style.color=Oe.optionsStatus[o].color,t.title=Oe.optionsStatus[o].text;break}return t}function P(){var e=document.createElement("div");return e["class"]=Oe.windowClass.panel,e.className=Oe.windowClass.panel,e.classList=Oe.windowClass.panel,e.style.zIndex="999",e.style.position="absolute",e.style["float"]="right",e.style.width="300px",e.style.margin="10px",e.style.right="2px",e.style.bottom="2px",e}function Y(){var e=document.createElement("div");return e["class"]=Oe.windowClass.header,e.className=Oe.windowClass.header,e.classList=Oe.windowClass.header,e.style.textOverflow="ellipsis",e}function W(e){var t=document.createElement("h3");return t["class"]=Oe.windowClass.title,t.className=Oe.windowClass.title,t.classList=Oe.windowClass.title,t.text=""!==e.nick?e.nick+" - "+e.nome:e.nome,t.innerText=""!==e.nick&&null!==e.nick?e.nick+" - "+e.nome:e.nome,t.innerText=""!==e.nick&&null!==e.nick?e.nick+" - "+e.nome:e.nome,t.style.width="250px",t.style.textOverflow="ellipsis",t.style.whiteSpace="nowrap",t.style.overflow="hidden",t.style.textAlign="left",t}function K(){var e=document.createElement("div");return e["class"]=Oe.windowClass.body,e.className=Oe.windowClass.body,e.classList=Oe.windowClass.body,e.style.overflowY="auto",e.style.overflowX="hidden",e.style.height="270px",e}function X(){var e=document.createElement("div");return e["class"]=Oe.windowClass.footer,e.className=Oe.windowClass.footer,e.classList=Oe.windowClass.footer,e.style.padding="0px",e.style.height="90px",e}function G(e){var t=document.createElement("form");return t.name="sendMsg",t.onsubmit=function(){return z(e),!1},t}function Q(e){var t=document.createElement("textarea");return t.onkeyup=function(){return 13===window.event.keyCode?($(this).parents("form").submit(),!1):void 0},t.required="required",t.name="msg",t.cols="10",t.rows="3",t.style.position="absolute",t.style.width="70%",t.style.height="75px",t.style.left="0px",t.style.resize="none",t.style.border="none",t.style.backgroundColor="#f5f5f5",t.style.outline="none",t.style.padding="7px",t}function Z(e){var t=document.createElement("i");return t["class"]=Oe.windowClass.close,t.className=Oe.windowClass.close,t.classList=Oe.windowClass.close,t.title="Fechar",t.style.position="absolute",t.style.right="10px",t.style.top="10px",t.style.cursor="pointer",t.onclick=function(){M(e)},t}function ee(){var e=document.createElement("button");e.type="submit",e["class"]=Oe.classButtonSend,e.className=Oe.classButtonSend,e.classList=Oe.classButtonSend,e.title="Enviar",e.style.position="absolute",e.style.right="0px",e.style.bottom="0px",e.style.width="30%",e.style.height="90px";var t=document.createElement("i");return t["class"]=Oe.windowClass.iconSend,t.className=Oe.windowClass.iconSend,t.classList=Oe.windowClass.iconSend,t.style.color=Oe.windowClass.sendColor,$(e).append(t),e}function te(e,t){var o=document.createElement("div"),n=document.createElement("label");return n.innerText=e.message,n.text=e.message,n.style.padding="6px",n.style.wordWrap="break-word",t===!0?(n["class"]=Oe.labelSendClass,n.classList=Oe.labelSendClass,n.className=Oe.labelSendClass,n.style.color=Oe.labelSendColor,o.style.textAlign="left",n.style.borderRadius="0px 10px 10px 10px"):(n["class"]=Oe.labelReceiveClass,n.classList=Oe.labelReceiveClass,n.className=Oe.labelReceiveClass,n.style.color=Oe.labelReceiveColor,o.style.textAlign="right",n.style.borderRadius="10px 0px 10px 10px"),$(o).append(n),o}function oe(e,t){var o=document.createElement("div");return o.innerText=e.data+" ",o.text=e.data+" ",o.style.fontSize="0.8em",o.style.marginBottom="10px",t===!0?o.style.textAlign="left":o.style.textAlign="right",o}function ne(){var e=document.createElement("i");return e["class"]=Oe.iconRead,e.classList=Oe.iconRead,e.className=Oe.iconRead,e.style.color=Oe.iconReadColor,e}function se(){try{var e=document.createElement("div");$(e).addClass(Oe["class"]);var t=document.createElement("ul");ke.forEach(function(e){if(parseInt(e.userId)!==parseInt(Oe.userId)){var o=document.createElement("div");o.style.textOverflow="ellipsis",$(o).append(e.button),$(o).append(e.i);var n=document.createElement("li");$(n).append(o),$(t).append(n)}}),$(e).append(t);var o=$("#"+Oe.innerDivMenuVideoContatos);$(o).html(U()),$(o).append(e).fadeIn(),$(o).addClass(Oe["class"])}catch(n){console.log(n)}}function ae(){var e=document.createElement("video");return e.autoplay=!0,e.muted=!0,e.id="localVideo",e.style.width="300px",e.style.height="225px",e.style.position="absolute",e.style.top="10px",e.style.left="10px",e.style.zIndex="1",e.style.border="1px solid #FFF",e}function le(){var e=document.createElement("video");return e.autoplay=!0,e.id="remoteVideo",e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex="0",e}function ce(){var e=document.createElement("div");return e.style.position="fixed",e.style.backgroundColor="rgba(0,0,0,0.31)",e.style.right="0px",e.style.top="0px",e.style.width="100%",e.style.height="100%",e.style.zIndex="1",e.id=Oe.divModalVideoConf,e}function ie(){var e=document.createElement("audio");e.autoplay=!0,e.loop=!0,e.style.display="none";var t=document.createElement("source");return t.src=Oe.sound_video_call,t.type="audio/mp3",$(e).append(t),e}function re(){var e=document.createElement("audio");e.autoplay=!0,e.loop=!1,e.style.display="none";var t=document.createElement("source");return t.src=Oe.sound_mensagem,t.type="audio/mp3",$(e).append(t),e}function de(e){var t=document.createElement("i");return t.style.position="absolute",t.style.right="25px",t.style.top="10px",t.style.cursor="pointer",t["class"]=Oe.icons.close,t.className=Oe.icons.close,t.classList=Oe.icons.close,t.style.zIndex="2",t.onclick=function(){w(e)},t.onmouseover=function(){$(this).css({color:"#FF4222"})},t.onmouseout=function(){$(this).css({color:"#000"})},t.title="Fechar vídeo conferência",t}function ue(e,t){var o=document.createElement("div");o.style.position="relative",o.style.width="30%",o.style.height="auto",o.style.margin="0px auto",o.style.top="calc(50% - 100px)",o.style.textAlign="center";var n=document.createElement("div"),s=""!==e.nick&&null!==e.nick?e.nick+" - "+e.nome:e.nome;return"recebendo"===t?(n.innerText="Recebendo chamada de vídeo conferência de\n"+s,n.text="Recebendo chamada de vídeo conferência de\n"+s):(n.innerText="Realizando chamada de vídeo conferência com\n"+s,n.text="Realizando chamada de vídeo conferência com\n"+s),n.style.color="#FFF",n.style.fontFamily="sans-serif",n.style.fontSize="17px",$(o).append(n),o}function me(e){var t=document.createElement("i");return t["class"]=Oe.icons.call,t.className=Oe.icons.call,t.classList=Oe.icons.call,t.style.color=Oe.icons.callColor,t.style.margin="10px",t.style.padding="10px",t.style.cursor="pointer",t.title="Realizar vídeo conferência",t.onclick=function(){v(e)},t.onmouseover=function(){$(this).css({color:Oe.icons.callColorHover})},t.onmouseout=function(){$(this).css({color:Oe.icons.callColor})},t}function pe(e){var t=document.createElement("i");return t["class"]=Oe.icons.call,t.className=Oe.icons.call,t.classList=Oe.icons.call,t.style.color=Oe.icons.closeCallColor,t.style.margin="10px",t.style.padding="10px",t.style.cursor="pointer",t.title="Desligar chamada de vídeo conferência",t.onclick=function(){C(e)},t.onmouseover=function(){$(this).css({color:Oe.icons.closeCallColorHover})},t.onmouseout=function(){$(this).css({color:Oe.icons.closeCallColor})},t}function fe(){var e=document.createElement("i");return e["class"]=Oe.icons.spinCall,e.className=Oe.icons.spinCall,e.classList=Oe.icons.spinCall,e.style.color=Oe.icons.spinColor,e.style.margin="10px",e.style.padding="10px",e.style.cursor="pointer",e.title="Realizando pedido de vídeo conferência",e}function he(){var e=document.createElement("i");return e["class"]=Oe.icons.spinLitle,e.className=Oe.icons.spinLitle,e.classList=Oe.icons.spinLitle,e.style.color=Oe.icons.spinLitleColor,e.style.margin="2px",e.style.padding="2px",e.style.cursor="pointer",e.title="Recebendo pedido de vídeo conferência",e}function we(){var e=document.createElement("button");e.style.position="absolute",e.style.left="10px",e.style.bottom="100px",e.style.borderRadius="30px",e.style.width="35px",e.style.height="35px",e["class"]=Oe.button.size+" btnFullscream",e.className=Oe.button.size+" btnFullscream",e.classList=Oe.button.size+" btnFullscream",e.title="Expandir | Retrair",e.onclick=function(){p()};var t=document.createElement("i");return t["class"]=Oe.icons.fullscreem,t.className=Oe.icons.fullscreem,t.classList=Oe.icons.fullscreem,$(e).append(t),e}function ye(e){var t=document.createElement("button");t.style.position="absolute",t.style.left="10px",t.style.bottom="60px",t.style.borderRadius="30px",t.style.width="35px",t.style.height="35px",t["class"]=Oe.button.size+" btnChat",t.className=Oe.button.size+" btnChat",t.classList=Oe.button.size+" btnChat",t.title="Abrir Chat",t.onclick=function(){m(e)};var o=document.createElement("i");return o["class"]=Oe.icons.activeChatBtn,o.className=Oe.icons.activeChatBtn,o.classList=Oe.icons.activeChatBtn,$(t).append(o),$(t).append(e.badge),t}function be(e){try{var t=document.createElement("div");t["class"]=Oe.errorClass,t.className=Oe.errorClass,t.classList=Oe.errorClass;var o=document.createElement("p");o.innerText=e,o.text=e,$(t).append(o),$("body").append(t).fadeIn(),setTimeout(ve,Oe.setTimeOut,t)}catch(e){console.log(e)}}function ve(e){$(e).remove()}var ge=null,Ie=!1,Ce=null,xe=!1,Se=ae(),$e=le(),Ee=null,ke=null,Ne={ws:"https:"===window.location.protocol?"wss://localhost:8080/Video":"ws://localhost:8080/Video",userId:null,url:"src/Controler/videoControler.php",timeToResponse:15e3,qtdMessages:30,buttonClassInitChat:"btn btn-success",buttonClassInitCall:"btn btn-link",classButtonSend:"btn btn-default",selectClassStatus:"btn btn-primary",iconRead:"fa fa-check-circle",iconReadColor:"#5CB85C",optionsStatus:[{text:"online",icon:"fa fa-video-camera",color:"#1EFF1E"},{text:"offline",icon:"fa fa-power-off",color:"#EC925B"},{text:"ocupado",icon:"fa fa-pencil-square-o",color:"#777777"}],"class":"video-conf",classBadge:"badge",colorBadge:"#EC925B",errorClass:"erroVideo",setTimeOut:5e3,labelReceiveColor:"#FFF",labelSendColor:"#FFF",labelReceiveClass:"label-info",labelSendClass:"label-warning",sound_mensagem:"./src/Chat/sound_mensagem.mp3",sound_video_call:"./src/Video/sound_video_call.mp3",windowClass:{panel:"panel panel-primary",header:"panel-heading",body:"panel-body",footer:"panel-footer",title:"panel-title",close:"fa fa-times",iconSend:"fa fa-3x fa-chevron-right",sendColor:""},icons:{call:"fa fa-5x fa-phone-square",callColor:"#55F555",callColorHover:"#60F160",spinCall:"fa fa-spinner fa-pulse fa-5x fa-fw margin-bottom",spinColor:"#55F555",closeCallColor:"#F58230",closeCallColorHover:"#EF995C",spinLitle:"fa fa-circle-o-notch fa-spin",spinLitleColor:"#55F555",close:"fa fa-3x fa-times",sendMsg:"fa fa-3x fa-chevron-right",sendColor:"",fullscreem:"fa fa-expand",microfone_on:"fa fa-microphone",microfone_off:"fa fa-microphone-slash",activeChatBtn:"fa fa-align-justify"},contentCSSVideo:{width:"100%",height:"100%",top:"0px",left:"0px"},divModalVideoConf:"modal-video-conf",innerDivMenuVideoContatos:"online-video-conf",button:{size:"btn btn-default btn-sm btn-round"}},Oe=$.extend({},Ne,e),Fe=new ab.Session(Oe.ws,function(){Fe.subscribe("online",t),Fe.subscribe("desconectar",t),Fe.subscribe("conectar",t),Fe.subscribe("changeStatus",t),Fe.subscribe("onError",t),Fe.subscribe("message",t),Fe.subscribe("readMessage",t),Fe.subscribe("chanelComunicVideo",t),Fe.subscribe("sendIceCandidate",t),Fe.publish("online",o()),console.log("CONECTAD0")},function(){console.warn("DESCONECTADO")},{skipSubprotocolCheck:!1})}